#include "mycanvas.h"
#include <QPainter>
#include <QColor>
#include <QPushButton>
#include <QGridLayout>
#include <QApplication>
#include <QSlider>
#include <QHBoxLayout>


QPointF MyCanvas::coo(int x , int y)
{

    return QPointF(x*m_unite,y*m_unite);
}


MyCanvas::MyCanvas(QWidget *parent)
{
    setFixedSize(m_largeur+2,m_hauteur+2);
}

void MyCanvas::paintEvent(QPaintEvent *)
{
    signed int i;
    int y=10;
    QPainter feuille(this);
    // 1) Sauvegarde du système de coordonnées
    feuille.save();
    // 2) Translation, rotation dou changement de coordonnées
    feuille.translate(m_largeur/2,m_hauteur/2);
    feuille.scale(1,-1);
    //dessin

    //grille horizontale
    feuille.setPen(Qt::gray);
    for (i=-50;i<50;i+=y) {
        feuille.drawLine(coo(i,50),coo(i,-50));
        feuille.drawLine(coo(50,i),coo(-50,i));
    }


    feuille.drawLine(coo(-50,-50),coo(50,-50));
    feuille.drawLine(coo(50,-50),coo(50,50));

    /*feuille.drawLine(coo(-49,-49),coo(49,-49));
    feuille.drawLine(coo(49,49),coo(49,-49));*/



    /*feuille.drawLine(coo(-10,49),coo(-10,-49));
    feuille.drawLine(coo(-20,49),coo(-20,-49));
    feuille.drawLine(coo(-30,49),coo(-30,-49));
    feuille.drawLine(coo(-40,49),coo(-40,-49));
    feuille.drawLine(coo(-5,49),coo(-5,-49));
    feuille.drawLine(coo(-15,49),coo(-15,-49));
    feuille.drawLine(coo(-25,49),coo(-25,-49));
    feuille.drawLine(coo(-35,49),coo(-35,-49));
    feuille.drawLine(coo(-45,49),coo(-45,-49));
    feuille.drawLine(coo(10,49),coo(10,-49));
    feuille.drawLine(coo(20,49),coo(20,-49));
    feuille.drawLine(coo(30,49),coo(30,-49));
    feuille.drawLine(coo(40,49),coo(40,-49));
    feuille.drawLine(coo(5,49),coo(5,-49));
    feuille.drawLine(coo(15,49),coo(15,-49));
    feuille.drawLine(coo(25,49),coo(25,-49));
    feuille.drawLine(coo(35,49),coo(35,-49));
    feuille.drawLine(coo(45,49),coo(45,-49));

    // grille verticale
    feuille.drawLine(coo(49,-5),coo(-49,-5));
    feuille.drawLine(coo(49,-10),coo(-49,-10));
    feuille.drawLine(coo(49,-15),coo(-49,-15));
    feuille.drawLine(coo(49,-20),coo(-49,-20));
    feuille.drawLine(coo(49,-25),coo(-49,-25));
    feuille.drawLine(coo(49,-30),coo(-49,-30));
    feuille.drawLine(coo(49,-35),coo(-49,-35));
    feuille.drawLine(coo(49,-40),coo(-49,-40));
    feuille.drawLine(coo(49,-45),coo(-49,-45));
    feuille.drawLine(coo(49,5),coo(-49,5));
    feuille.drawLine(coo(49,10),coo(-49,10));
    feuille.drawLine(coo(49,15),coo(-49,15));
    feuille.drawLine(coo(49,20),coo(-49,20));
    feuille.drawLine(coo(49,25),coo(-49,25));
    feuille.drawLine(coo(49,30),coo(-49,30));
    feuille.drawLine(coo(49,35),coo(-49,35));
    feuille.drawLine(coo(49,40),coo(-49,40));
    feuille.drawLine(coo(49,45),coo(-49,45));*/



    feuille.setPen(Qt::blue);
    feuille.drawLine(coo(0,-49),coo(0,49));
    feuille.drawLine(coo(-49,0),coo(49,0));

    feuille.setPen(Qt::red);
    feuille.drawLine(coo(10,10),coo(40,20));

    //restauration du systeme de coo
    feuille.restore();
}

void MyCanvas::zoomchanged(int z)
{
    
}
